<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Horario Docente</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f4f7fb; margin: 0; }
    .main { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(24,70,182,0.08); padding: 30px; }
    .horario-table { border-collapse: collapse; width: 100%; margin-top: 18px; }
    .horario-table th, .horario-table td { border: 1px solid #bdbdbd; padding: 8px 10px; text-align: center; }
    .horario-table th { background: #bfa16c; color: #fff; font-weight: bold; }
    .horario-table tr:nth-child(even) { background: #f9fafb; }
    .horario-table tr:hover { background: #f3f4f6; }
  </style>
</head>
<body>
  <div class="main">
    <h2>Horario del periodo actual</h2>
    <table class="horario-table">
      <thead>
        <tr>
          <th>Clave</th>
          <th>Materia</th>
          <th>Grupo</th>
          <th>Lunes</th>
          <th>Martes</th>
          <th>Miércoles</th>
          <th>Jueves</th>
          <th>Viernes</th>
          <th>Sábado</th>
          <th>Domingo</th>
        </tr>
      </thead>
      <tbody id="horario-body"></tbody>
    </table>
  </div>
  <script>
    let docente = JSON.parse(localStorage.getItem('docente'));
    if (!docente) window.location.href = 'indexSP.html';
    async function cargarHorario() {
      const tbody = document.getElementById('horario-body');
      tbody.innerHTML = '';
      const res = await fetch(`http://localhost:4000/api/horario-docente/${docente.id}`);
      const materias = await res.json();
      if (!Array.isArray(materias) || materias.length === 0) {
        tbody.innerHTML = '<tr><td colspan="10">No tienes materias asignadas en el periodo actual.</td></tr>';
        return;
      }
      materias.forEach(m => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${m.clave_materia || ''}</td>
          <td>${m.nombre_materia || ''}</td>
          <td>${m.grupo || ''}</td>
          <td>${m.lunes || ''}</td>
          <td>${m.martes || ''}</td>
          <td>${m.miercoles || ''}</td>
          <td>${m.jueves || ''}</td>
          <td>${m.viernes || ''}</td>
          <td>${m.sabado || ''}</td>
          <td>${m.domingo || ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }
    document.addEventListener('DOMContentLoaded', cargarHorario);
  </script>
</body>
</html>
